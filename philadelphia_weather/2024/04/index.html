<!DOCTYPE html>  
<html lang="zh-CN">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>请选择日期 - 2024年4月</title>
    <link rel="icon" href="../../../H8_FRGB_TRY.png" type="image/png" sizes="32x32">
    <style>  
        /* 样式可以根据需要调整 */  
        body {  
            font-family: Arial, sans-serif;  
            display: flex; 
            align-items: center;  
            justify-content: center;
            height: 100vh;  
            margin: 0;  
            background:url("../../../img.bmp")  no-repeat center center; 
            background-size:cover;
            background-attachment:fixed; 
            background-color:#CCCCCC;
        }
        
        .form-container {
            padding: 20px;
            background-color: rgba(255,255,255,0.5);
            border: 2px solid black;
            text-align: center;
            border-radius: 10px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }  
        .form-container select {  
            margin-bottom: 10px;  
            padding: 5px;  
            font-size: 16px;  
        }  
        .form-container button {  
            padding: 10px 20px;  
            font-size: 16px;  
            cursor: pointer;  
        }
        
        .button {  
            display: inline-block;
            font-size: 16px;  
            color: white;  
            background-color: #3E8E41;  
            text-decoration: none;
            border: 2px solid darkgreen;  
            border-radius: 5px;  
            cursor: pointer;
            transition: background-color 0.4s;
        }
              
        .button:hover {  
            background-color: #4CAF50;
        }
        
        .red {
            color: red;
            width: 500px;
        }
    </style>  
</head>  
<body>
    <div class="form-container">
        <h1>请选择日期 - 2024年4月</h1>
        <form id="dateForm">  
            <label for="dateSelect">选择日期:</label>  
            <select id="dateSelect" name="date">  
                <!-- JavaScript will populate this list with days of the current month -->  
            </select>  
            <button type="button" onclick="submitForm()" class="button">查询</button>  
        </form>  
    </div>  
  
    <script>  
        // 填充日期选择表单，只包含当前月份的天数  
        function populateDateSelect(year, month) {  
            const dateSelect = document.getElementById('dateSelect');  
            const daysInMonth = new Date(year, month + 1, 0).getDate();  
  
            for (let day = 1; day <= daysInMonth; day++) {  
                const option = document.createElement('option');  
                option.value = `${String(day).padStart(2, '0')}`;  
                option.textContent = `${String(day).padStart(2, '0')}`;  
                dateSelect.appendChild(option);  
            }  
        }  
  
        // 提交表单并跳转到新页面，只添加日期到URL末尾  
        function submitForm() {  
            const selectedDate = document.getElementById('dateSelect').value;  
            if (selectedDate) {  
                // 获取当前页面的URL，并去掉可能的尾随斜杠  
                let currentPageUrl = window.location.pathname.replace(/\/$/, '');  
                // 拼接新的URL，添加选定的日期  
                const newUrl = `${currentPageUrl}/${selectedDate}`;  
                window.location.href = newUrl;  
            } else {  
                alert('请选择日期');  
            }  
        }  
  
        // 页面加载时，使用URL中的月份（假设格式为/2024/10/）来填充日期选择表单  
        // 注意：这里假设URL格式正确，并且月份已经作为路径的一部分存在  
        window.onload = function() {  
            const pathParts = window.location.pathname.split('/');  
            // 假设/somepath/是固定的，或者您知道要跳过多少个部分来到达年份  
            // 这里我们假设要跳过前两个部分（'' 和 'somepath'），然后取接下来的两个部分（年份和月份）  
            if (pathParts.length >= 4 && /^\d{4}$/.test(pathParts[2]) && /^\d{2}$/.test(pathParts[3])) {  
                const year = parseInt(pathParts[2], 10);  
                const month = parseInt(pathParts[3], 10) - 1; // 月份从0开始，所以需要减1  
                populateDateSelect(year, month);  
            } else {  
                alert('页面URL格式不正确，无法确定当前月份。');  
            }  
        };   
    </script>  
</body>  
</html>
